<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <link rel="stylesheet" href="./responsive.css" />
</head>

<body>
  <div class="main-container">
    <div class="contents-wrap">
      <form action="" method="POST" id="form__wrap">
        <input type="hidden" name="memberType" id="memberType" value="${userInfo.memberType}" />
        <div class="checkbox-all">
          <input type="checkbox" name="checkAll" id="checkAll" class="input-checkbox" />
          <label for="checkAll">모든 약관 동의</label>
        </div>
        <!-- // 모든 약관 동의 선택 -->
        
        <div class="accordion__wrapper terms__list">
          <div class="accordion">
            <div class="accordion__header">
              <div class="checkbox">
                <input type="checkbox" name="agreement" id="agree1" value="N" class="input-checkbox" required />
                <div class="checkbox__inner">
                  <span class="checkbox__text"></span>
                </div>
              </div>
              <label for="agree1">[필수] 이용약관</label>
            </div>
            <div class="accordion__button">
              <img src="./images/check-icon-b.png" alt="" />
            </div>
            <div class="accordion__content">
              <p>
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Ex
                debitis tempora perspiciatis incidunt veritatis rerum
                quibusdam ea consectetur tenetur eos. Dolores necessitatibus
                excepturi sit error magni perferendis maiores suscipit. Nihil?
              </p>
            </div>
          </div>
          <!-- //[필수] 금성출판사 이용약관 -->
          <div class="accordion">
            <div class="accordion__header">
              <div class="checkbox">
                <input type="checkbox" name="agreement" id="agree2" value="N" class="input-checkbox" required />
                <div class="checkbox__inner">
                  <span class="checkbox__text"></span>
                </div>
              </div>
              <label for="agree2">[필수] 개인정보취급방침</label>
            </div>
            <div class="accordion__button">
              <img src="./images/check-icon-b.png" alt="" />
            </div>
            <div class="accordion__content">
              <p>
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Ex
                debitis tempora perspiciatis incidunt veritatis rerum
                quibusdam ea consectetur tenetur eos. Dolores necessitatibus
                excepturi sit error magni perferendis maiores suscipit. Nihil?
              </p>
            </div>
          </div>
          <!-- //[필수] 개인정보취급방침 -->
          <div class="accordion">
            <div class="accordion__header">
              <div class="checkbox">
                <input type="checkbox" name="agreement" id="agree3" value="N" class="input-checkbox" required />
                <div class="checkbox__inner">
                  <span class="checkbox__text"></span>
                </div>
              </div>
              <label for="agree3">[필수] 개인정보 수집 및 이용 동의</label>
            </div>
            <div class="accordion__button">
              <img src="./images/check-icon-b.png" alt="" />
            </div>
            <div class="accordion__content">
              <p>
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Ex
                debitis tempora perspiciatis incidunt veritatis rerum
                quibusdam ea consectetur tenetur eos. Dolores necessitatibus
                excepturi sit error magni perferendis maiores suscipit. Nihil?
              </p>
            </div>
          </div>
          <!-- //[필수] 개인정보 수집 및 이용 동의 -->
          <div class="accordion">
            <div class="accordion__header">
              <div class="checkbox">
                <input type="checkbox" name="marketInfo" id="agree4" value="N" class="input-checkbox" />
                <div class="checkbox__inner">
                  <span class="checkbox__text"></span>
                </div>
              </div>
              <label for="agree4">[선택] 마케팅 정보 수신</label>
            </div>
            <div class="accordion__button">
              <img src="./images/check-icon-b.png" alt="" />
            </div>
            <div class="accordion__content">
              <p>
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Ex
                debitis tempora perspiciatis incidunt veritatis rerum
                quibusdam ea consectetur tenetur eos. Dolores necessitatibus
                excepturi sit error magni perferendis maiores suscipit. Nihil?
              </p>
            </div>
          </div>
          <!-- //[선택] 개인정보의 수집 이용 동의 -->
          <div class="accordion">
            <div class="accordion__header">
              <div class="checkbox">
                <input type="checkbox" name="agreement" id="Agree5" value="N" class="input-checkbox" required />
                <div class="checkbox__inner">
                  <span class="checkbox__text"></span>
                </div>
              </div>
              <label for="Agree5">[필수] 수집한 개인정보의 취급 위탁</label>
            </div>
            <div class="accordion__button">
              <img src="./images/check-icon-b.png" alt="" />
            </div>
            <div class="accordion__content">
              <p>
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Ex
                debitis tempora perspiciatis incidunt veritatis rerum
                quibusdam ea consectetur tenetur eos. Dolores necessitatibus
                excepturi sit error magni perferendis maiores suscipit. Nihil?
              </p>
            </div>
          </div>
          <!-- //[필수] 수집한 개인정보의 취급 위탁 -->
        </div>
        <button type="submit" class="next-btn" disabled>다음</button>
      </form>
    </div>
  </div>
  <script>
    // 동의 선택 & 전체선택 & 버튼 활성화 / 비활성화
    const checkAll = document.querySelector(".checkbox-all input")
    const checkBoxes = document.querySelectorAll(".accordion__header input")
    const submitButton = document.querySelector("button.next-btn")

    const agreements = {
      agree1: false,
      agree2: false,
      agree3: false,
      agree4: false,
      Agree5: false,
    }

    checkBoxes.forEach((item) =>
      item.addEventListener("input", toggleCheckbox)
    )

    function toggleCheckbox(e) {
      const { checked, id } = e.target
      agreements[id] = checked
      this.parentNode.classList.toggle("active")
      checkAllStatus()
      activeButton()
      if (this.parentNode.classList.contains("active")) {
        this.value = "Y"
      } else {
        this.value = "N"
      }
    }

    function checkAllStatus() {
      const { agree1, agree2, agree3, agree4, Agree5 } = agreements
      if (agree1 && agree2 && agree3 && agree4 && Agree5) {
        checkAll.checked = true
      } else {
        checkAll.checked = false
      }
    }

    function activeButton() {
      const { agree1, agree2, agree3, Agree5, } = agreements
      if (agree1 && agree2 && agree3 && Agree5) {
        submitButton.disabled = false
      } else {
        submitButton.disabled = true
      }
    }

    checkAll.addEventListener("click", (e) => {
      const { checked } = e.target
      if (checked) {
        checkBoxes.forEach((item) => {
          item.checked = true
          agreements[item.id] = true
          item.parentNode.classList.add("active")
          item.value = "Y"
        })
      } else {
        checkBoxes.forEach((item) => {
          item.checked = false
          agreements[item.id] = false
          item.parentNode.classList.remove("active")
          item.value = "N"
        })
      }
      activeButton()
    })

    // 아코디언
    let itemTab = document.querySelectorAll(".accordion .accordion__button")

    for (let i = 0; i < itemTab.length; i++) {
      itemTab[i].addEventListener("click", function () {
        this.classList.toggle("active")
        for (let a = 0; a < itemTab.length; a++) {
          if (a != i) {
            itemTab[a].classList.remove("active")
            itemTab[a].nextElementSibling.style.maxHeight = null
          }
        }
        let panel = this.nextElementSibling
        if (panel.style.maxHeight) {
          panel.style.maxHeight = null
        } else {
          panel.style.maxHeight = panel.scrollHeight + "px"
        }
      })
    }
  </script>
</body>

</html>