<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./timetable.css">
    <link rel='stylesheet' href='http://wenzhixin.net.cn/p/multiple-select/assets/multiple-select/multiple-select.css'>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div class="wrap">
        <div id="users">
            <select class="date_s" style="width:120px;" data-placeholder="Choose a date">
            </select>
            <select class="name_s" style="width:150px;" data-placeholder="Choose a name">
            </select>
            <ul class="list">
                <li>
                    <h3 class="name">Jonny Wayne</h3>
                    <p class="born">1986</p>
                </li>
                <li>
                    <h3 class="name">Jonas</h3>
                    <p class="born">1985</p>
                </li>
                <li>
                    <h3 class="name">Jonas</h3>
                    <p class="born">1985</p>
                </li>
                <li>
                    <h3 class="name">Jonas</h3>
                    <p class="born">1985</p>
                </li>
                <li>
                    <h3 class="name">Martina</h3>
                    <p class="born">1986</p>
                </li>
                <li>
                    <h3 class="name">Gustaf</h3>
                    <p class="born">1983</p>
                </li>
            </ul>

        </div>
        <div class="tab">
            <header>
                <h1>학습 시간표</h1>
                <button class="close-btn"><img src="./close_button.png" alt=""></button>
            </header>
            <ul class="tab-nav">
                <li class="tab-nav-item active"><a class="tab-nav-link" href="#">시간표 설정</a></li>
                <li class="tab-nav-item"><a class="tab-nav-link" href="#">시간표 확인</a></li>
            </ul>
            <div class="tab-body">
                <div class="tab-pane active">
                    <span>학년/학기/과목/교과서를 선택 후 요일과 시간의 + 영역을 선택하세요.</span>
                    <button class="button add-btn"><img src="./add-btn.png" alt=""></button>
                    <div class="container">
                        <div class="col-group">
                            <div class="form-group">
                                <label for="tableTitle">제목</label>
                                <input type="text" placeholder="(0/12)">
                            </div>
                            <div class="form-group">
                                <div class="base-checkbox">
                                    <div class="checkbox">
                                        <input id="default" type="checkbox" class="input-checkbox"
                                            disabled="disabled" />
                                        <div class="checkbox__inner">
                                            <span class="checkbox__text"></span>
                                        </div>
                                    </div>
                                    <label class="label-checkbox" for="default"></label>
                                </div>
                                <label for="">기본값</label>
                            </div>
                            <select name="" id="">
                                <option value="">학급 시간표1</option>
                                <option value="">학급 시간표2</option>
                                <option value="">학급 시간표3</option>
                            </select>
                        </div>
                        <div class="left">
                            <div class="form-group">
                                <label for="">학년</label>
                                <select name="" id="">
                                    <option value="">1학년</option>
                                    <option value="">2학년</option>
                                    <option value="">3학년</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="">학기</label>
                                <select name="" id="">
                                    <option value="">1학기</option>
                                    <option value="">2학기</option>
                                </select>
                            </div>
                            <table class="tab sub-tab">
                                <thead>
                                    <tr>
                                        <th>과목</th>
                                        <th>교과서</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="tab-nav">
                                            <li class="tab-nav-item"><a class="tab-nav-link" href="#">과목1</a>
                                            </li>
                                            <li class="tab-nav-item"><a class="tab-nav-link" href="#">과목2</a></li>
                                        </td>
                                        <td class="tab-body">
                                            <div class="tab-pane active">
                                                <div class="tab">
                                                    <ul class="tab-nav textbook-nav">
                                                        <li class="tab-nav-item">
                                                            <a class="tab-nav-select" href="#">
                                                                Textbook 1
                                                            </a>
                                                        </li>
                                                        <li class="tab-nav-item">
                                                            <a class="tab-nav-select" href="#">Textbook 2</a>
                                                        </li>
                                                        <li class="tab-nav-item">
                                                            <a class="tab-nav-select" href="#">Textbook 3</a>
                                                        </li>
                                                        <li class="tab-nav-item">
                                                            <a class="tab-nav-select" href="#">Textbook 4</a>
                                                        </li>
                                                        <li class="tab-nav-item">
                                                            <a class="tab-nav-select" href="#">Textbook 5</a>
                                                        </li>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="tab-pane">
                                                <div class="tab">
                                                    <ul class="tab-nav textbook-nav">
                                                        <li class="tab-nav-item">
                                                            <a class="tab-nav-select" href="#">
                                                                Textbook 1
                                                            </a>
                                                        </li>
                                                        <li class="tab-nav-item">
                                                            <a class="tab-nav-select" href="#">Textbook 2</a>
                                                        </li>
                                                        <li class="tab-nav-item">
                                                            <a class="tab-nav-select" href="#">Textbook 3</a>
                                                        </li>
                                                        <li class="tab-nav-item">
                                                            <a class="tab-nav-select" href="#">Textbook 4</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="tab-pane">Subtab pane 3</div>
                                            <div class="tab-pane">Subtab pane 4</div>
                                            <div class="tab-pane">Subtab pane 5</div>
                                            <div class="tab-pane">Subtab pane 6</div>
                                            <div class="tab-pane">Subtab pane 7</div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="right">
                            <table id="timeTable" class="time-table">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th>월</th>
                                        <th>화</th>
                                        <th>수</th>
                                        <th>목</th>
                                        <th>금</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                            <div class="buttons">
                                <button class="button reset-btn" onclick="deleteCell()">초기화</button>
                                <button class="button save-btn" onclick="showPopup()">저장하기</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane">
                    <div class="form-group" style="justify-content: space-between;">
                        <span>시간표를 클릭하면 해당 과목 사이트로 바로 이동합니다.</span>
                        <select name="" id="">
                            <option value="">3학년 1학기 시간표</option>
                            <option value="">3학년 1학기 시간표</option>
                            <option value="">3학년 1학기 시간표</option>
                        </select>
                    </div>
                    <table class="time-table check">
                        <thead>
                            <tr>
                                <th></th>
                                <th>월</th>
                                <th>화</th>
                                <th>수</th>
                                <th>목</th>
                                <th>금</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th>1교시</th>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <th>2교시</th>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <th>3교시</th>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <th>4교시</th>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <th>5교시</th>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <th>6교시</th>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div id="popupDiv" class="popup">
                <strong>시간표가 저장되었습니다.</strong>
                <button class="check-btn" onclick="closePopup()">확인</button>
            </div>
            <!-- <div id="tooltips" class="tooltips">
                <p>
                    국정 교과서는 교과서 선택없이<br>
                    + 영역을 선택하세요.
                </p>
            </div> -->

            <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
            <script
                src='//wenzhixin.net.cn/p/multiple-select/assets/multiple-select/jquery.multiple.select.js'></script>
            <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.1.0/list.min.js"></script>
            <!-- partial -->
            <script src="./script.js"></script>
            <script>
                // Tabs
                const tab = document.querySelectorAll('.tab');

                const onClickTabNavLink = () => {
                    Array.prototype.forEach.call(tab, e => {
                        const tabNavLinks = e.querySelectorAll('.tab-nav-link');

                        Array.prototype.forEach.call(tabNavLinks, (e, tabIndex) => {
                            e.addEventListener('click', event => {
                                const tabPanes = e.closest('.tab').querySelector('.tab-body').children;
                                const tabNavItems = e.closest('.tab').querySelector('.tab-nav').querySelectorAll('.tab-nav-item');

                                event.preventDefault();

                                Array.prototype.forEach.call(tabNavItems, (e, indexNav) => {
                                    if (indexNav === tabIndex) {
                                        e.classList.add('active');
                                    } else {
                                        e.classList.remove('active');
                                    }
                                });

                                Array.prototype.forEach.call(tabPanes, (e, indexPane) => {
                                    if (indexPane === tabIndex) {
                                        e.classList.add('active');
                                    } else {
                                        e.classList.remove('active');
                                    }
                                });
                            }, false);
                        });
                    });
                }

                // Add cell
                const addCell = () => {
                    let tableBody = document.querySelectorAll('#timeTable > tbody')
                    Array.prototype.forEach.call(tableBody, (event, indexTr) => {
                        event.innerHTML = '<tr></tr><tr></tr><tr></tr><tr></tr><tr></tr><tr></tr>'
                        let tableRow = document.querySelectorAll('#timeTable > tbody > tr')
                        Array.prototype.forEach.call(tableRow, (e, tableCol) => {
                            e.innerHTML = '<th>' + (tableCol + 1) + '교시</th><td><button>+</button></td><td><button>+</button></td><td><button>+</button></td><td><button>+</button></td><td><button>+</button></td>'
                        })
                    })

                    let subTab = document.querySelectorAll(".sub-tab > tbody > tr > td.tab-nav > li")
                    Array.prototype.forEach.call(subTab, (evt, idx) => {
                        evt.addEventListener('click', event => {
                            let textbookBox2 = document.querySelector('.textbook-tit')
                            textbookBox2 = subTab[idx].innerHTML

                            let textbook = document.querySelectorAll('.textbook-nav > li')
                            Array.prototype.forEach.call(textbook, (e, indexTextbook) => {
                                e.addEventListener('click', event => {
                                    let textbookBox = document.querySelector('.textbook-tit')
                                    textbookBox = textbook[indexTextbook].innerHTML

                                    let tableColblock = document.querySelectorAll('#timeTable > tbody > tr > td')
                                    Array.prototype.forEach.call(tableColblock, (event, index) => {
                                        let addBtn = tableColblock[index].children[0]
                                        addBtn.addEventListener('click', e => {
                                            tableColblock[index].innerHTML += "<div class=textbook" + "-" + "box>" + textbookBox2 + textbookBox + "<button id=closeBtn class=close-btn onclick=deleteCell() ></button ></div >"
                                        })
                                    })
                                })
                            });
                        })
                    })
                }

                // Delete cell
                const deleteCell = () => {
                    let tableColblock = document.querySelectorAll('#timeTable > tbody > tr > td')
                    const closeBtn = document.querySelector('closeBtn')
                    Array.prototype.forEach.call(tableColblock, (event, index) => {
                        tableColblock[index].innerHTML = '<button>+</button>'
                    })
                }

                // Init
                const init = () => {
                    // Tabs Init
                    onClickTabNavLink();
                    addCell();
                };

                document.addEventListener('DOMContentLoaded', init);


                // Popup
                const closePopup = () => {
                    document.getElementById('popupDiv').style.display = 'none'
                }
                const showPopup = () => {
                    document.getElementById('popupDiv').style.display = 'flex'
                }

            </script>
        </div>
    </div>
</body>

</html>