<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .tab-nav {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .tab-nav-item.active .tab-nav-link {
            background-color: #ccc;
        }

        .tab-nav-link {
            display: block;
            padding: 10px 20px;
            background-color: #f5f5f5;
            border: 1px solid #ccc;
            border-radius: 5px 5px 0 0;
        }

        .tab-body {
            background-color: #fff;
            padding: 10px;
            border: 1px solid #ccc;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        .sub-tab .tab-nav {
            flex-direction: column;
        }

        .tab-pane .container {
            display: flex;
        }

        .textbook-box {
            width: 100px;
            height: 100px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            border: 2px solid;
            padding: 2px;
            z-index: 10;
        }

        #timeTable td {
            width: 100px;
            height: 100px;
            position: relative;
        }

        #timeTable td>button {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div class="tab">
        <ul class="tab-nav">
            <li class="tab-nav-item active"><a class="tab-nav-link" href="#">Tab 1</a></li>
            <li class="tab-nav-item"><a class="tab-nav-link" href="#">Tab 2</a></li>
        </ul>
        <div class="tab-body">
            <div class="tab-pane active">
                <span>학년/학기/과목/교과서를 선택 후 요일과 시간의 + 영역을 선택하세요.</span>
                <div class="container">
                    <div class="left">
                        <div class="form-group">
                            <label for="">학년</label>
                            <select name="" id="">
                                <option value="">1학년</option>
                                <option value="">2학년</option>
                                <option value="">3학년</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="">학기</label>
                            <select name="" id="">
                                <option value="">1학기</option>
                                <option value="">2학기</option>
                            </select>
                        </div>
                        <table class="tab sub-tab">
                            <thead>
                                <tr>
                                    <th>과목</th>
                                    <th>교과서</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="tab-nav">
                                        <li class="tab-nav-item active"><a class="tab-nav-link" href="#">Subject 1</a>
                                        </li>
                                        <li class="tab-nav-item"><a class="tab-nav-link" href="#">Subject 2</a></li>
                                        <li class="tab-nav-item"><a class="tab-nav-link" href="#">Subject 3</a></li>
                                        <li class="tab-nav-item"><a class="tab-nav-link" href="#">Subject 4</a></li>
                                        <li class="tab-nav-item"><a class="tab-nav-link" href="#">Subject 5</a></li>
                                        <li class="tab-nav-item"><a class="tab-nav-link" href="#">Subject 6</a></li>
                                        <li class="tab-nav-item"><a class="tab-nav-link" href="#">Subject 7</a></li>
                                    </td>
                                    <td class="tab-body">
                                        <div class="tab-pane active">
                                            <div class="tab">
                                                <ul class="tab-nav textbook-nav">
                                                    <li class="tab-nav-item">
                                                        <a class="tab-nav-select" href="#">Textbook 1</a>
                                                    </li>
                                                    <li class="tab-nav-item">
                                                        <a class="tab-nav-select" href="#">Textbook 2</a>
                                                    </li>
                                                    <li class="tab-nav-item">
                                                        <a class="tab-nav-select" href="#">Textbook 3</a>
                                                    </li>
                                                    <li class="tab-nav-item">
                                                        <a class="tab-nav-select" href="#">Textbook 4</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="tab-pane">Subtab pane 2</div>
                                        <div class="tab-pane">Subtab pane 3</div>
                                        <div class="tab-pane">Subtab pane 4</div>
                                        <div class="tab-pane">Subtab pane 5</div>
                                        <div class="tab-pane">Subtab pane 6</div>
                                        <div class="tab-pane">Subtab pane 7</div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="right">
                        <div class="form-group">
                            <label for="tableTitle">제목<span>(0/12)</span></label>
                            <input type="text">
                            <input type="checkbox">
                            <select name="" id="">
                                <option value="">학급 시간표1</option>
                                <option value="">학급 시간표2</option>
                                <option value="">학급 시간표3</option>
                            </select>
                        </div>
                        <table id="timeTable">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>월</th>
                                    <th>화</th>
                                    <th>수</th>
                                    <th>목</th>
                                    <th>금</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <div class="buttons">
                            <button class="button reset-btn">초기화</button>
                            <button class="button save-btn">저장하기</button>
                            <button class="button add-btn">시간표 추가</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane">
                <div class="form-group">
                    <span>시간표를 클릭하면 해당 과목 사이트로 바로 이동합니다.</span>
                    <select name="" id="">
                        <option value="">학급 시간표1</option>
                        <option value="">학급 시간표2</option>
                        <option value="">학급 시간표3</option>
                    </select>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th>월</th>
                            <th>화</th>
                            <th>수</th>
                            <th>목</th>
                            <th>금</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th>1교시</th>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                        </tr>
                        <tr>
                            <th>2교시</th>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                        </tr>
                        <tr>
                            <th>3교시</th>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                        </tr>
                        <tr>
                            <th>4교시</th>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                        </tr>
                        <tr>
                            <th>5교시</th>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                        </tr>
                        <tr>
                            <th>6교시</th>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                            <td><a href="#none">+</a></td>
                        </tr>
                    </tbody>
                </table>
                <div class="buttons">
                    <button class="button reset-btn">초기화</button>
                    <button class="button save-btn">저장하기</button>
                    <button class="button add-btn">시간표 추가</button>
                </div>
            </div>
        </div>
        <script>
            // Tabs
            const tab = document.querySelectorAll('.tab');

            const onClickTabNavLink = () => {
                Array.prototype.forEach.call(tab, e => {
                    const tabNavLinks = e.querySelectorAll('.tab-nav-link');

                    Array.prototype.forEach.call(tabNavLinks, (e, tabIndex) => {
                        e.addEventListener('click', event => {
                            const tabPanes = e.closest('.tab').querySelector('.tab-body').children;
                            const tabNavItems = e.closest('.tab').querySelector('.tab-nav').querySelectorAll('.tab-nav-item');

                            event.preventDefault();

                            Array.prototype.forEach.call(tabNavItems, (e, indexNav) => {
                                if (indexNav === tabIndex) {
                                    e.classList.add('active');
                                } else {
                                    e.classList.remove('active');
                                }
                            });

                            Array.prototype.forEach.call(tabPanes, (e, indexPane) => {
                                if (indexPane === tabIndex) {
                                    e.classList.add('active');
                                } else {
                                    e.classList.remove('active');
                                }
                            });
                        }, false);
                    });
                });
            }

            // Add Timetable
            const addTimetable = () => {
                let tableBody = document.querySelectorAll('#timeTable > tbody')
                Array.prototype.forEach.call(tableBody, (event, indexTr) => {
                    event.innerHTML = '<tr></tr><tr></tr><tr></tr><tr></tr><tr></tr>'
                    let tableRow = document.querySelectorAll('#timeTable > tbody > tr')
                    Array.prototype.forEach.call(tableRow, (e, tableCol) => {
                        e.innerHTML = '<th>' + (tableCol + 1) + '교시</th><td><button>+</button></td><td><button>+</button></td><td><button>+</button></td><td><button>+</button></td><td><button>+</button></td>'
                    })
                })

                let textbook = document.querySelectorAll('.textbook-nav > li')
                Array.prototype.forEach.call(textbook, (e, indexTextbook) => {
                    e.addEventListener('click', event => {
                        let textbookBox = document.querySelector('.textbook-tit')
                        textbookBox = textbook[indexTextbook].innerText
                        console.log(textbookBox)

                        let tableColblock = document.querySelectorAll('#timeTable > tbody > tr > td')
                        Array.prototype.forEach.call(tableColblock, (event, index) => {
                            console.log(tableColblock)
                            let addBtn = tableColblock[index].children[0]
                            addBtn.addEventListener('click', e => {
                                tableColblock[index].innerHTML += "<div class=textbook" + "-" + "box>" + textbookBox + "<button id=closeBtn class=close-btn onclick=deleteTimetable() > X</button ></div >"
                                console.log(tableColblock[index])
                            })
                        })
                    })
                });
            }

            // Delete Timetable
            const deleteTimetable = () => {
                console.log('test')
                let tableColblock = document.querySelectorAll('#timeTable > tbody > tr > td')
                const closeBtn = document.querySelector('closeBtn')
                Array.prototype.forEach.call(tableColblock, (event, index) => {
                    tableColblock[index].innerHTML = '<button>+</button>'
                })
            }

            // Init
            const init = () => {
                // Tabs Init
                onClickTabNavLink();
                addTimetable();
                deleteTimetable();
            };

            document.addEventListener('DOMContentLoaded', init);
        </script>
</body>

</html>